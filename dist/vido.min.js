/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t=globalThis,e=t.trustedTypes,s=e?e.createPolicy("lit-html",{createHTML:t=>t}):void 0,n="$lit$",i=`lit$${Math.random().toFixed(9).slice(2)}$`,o="?"+i,r=`<${o}>`,h=document,c=()=>h.createComment(""),l=t=>null===t||"object"!=typeof t&&"function"!=typeof t,a=Array.isArray,d=t=>a(t)||"function"==typeof t?.[Symbol.iterator],u="[ \t\n\f\r]",p=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,f=/-->/g,m=/>/g,y=RegExp(`>|${u}(?:([^\\s"'>=/]+)(${u}*=${u}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),v=/'/g,g=/"/g,$=/^(?:script|style|textarea|title)$/i,A=t=>(e,...s)=>({_$litType$:t,strings:e,values:s}),_=A(1),b=A(2),x=A(3),C=Symbol.for("lit-noChange"),w=Symbol.for("lit-nothing"),T=new WeakMap,I=h.createTreeWalker(h,129);function E(t,e){if(!a(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==s?s.createHTML(e):e}const Y=(t,e)=>{const s=t.length-1,o=[];let h,c=2===e?"<svg>":3===e?"<math>":"",l=p;for(let e=0;e<s;e++){const s=t[e];let a,d,u=-1,A=0;for(;A<s.length&&(l.lastIndex=A,d=l.exec(s),null!==d);)A=l.lastIndex,l===p?"!--"===d[1]?l=f:void 0!==d[1]?l=m:void 0!==d[2]?($.test(d[2])&&(h=RegExp("</"+d[2],"g")),l=y):void 0!==d[3]&&(l=y):l===y?">"===d[0]?(l=h??p,u=-1):void 0===d[1]?u=-2:(u=l.lastIndex-d[2].length,a=d[1],l=void 0===d[3]?y:'"'===d[3]?g:v):l===g||l===v?l=y:l===f||l===m?l=p:(l=y,h=void 0);const _=l===y&&t[e+1].startsWith("/>")?" ":"";c+=l===p?s+r:u>=0?(o.push(a),s.slice(0,u)+n+s.slice(u)+i+_):s+i+(-2===u?e:_)}return[E(t,c+(t[s]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),o]};class M{constructor({strings:t,_$litType$:s},r){let h;this.parts=[];let l=0,a=0;const d=t.length-1,u=this.parts,[p,f]=Y(t,s);if(this.el=M.createElement(p,r),I.currentNode=this.el.content,2===s||3===s){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(h=I.nextNode())&&u.length<d;){if(1===h.nodeType){if(h.hasAttributes())for(const t of h.getAttributeNames())if(t.endsWith(n)){const e=f[a++],s=h.getAttribute(t).split(i),n=/([.?@])?(.*)/.exec(e);u.push({type:1,index:l,name:n[2],strings:s,ctor:"."===n[1]?H:"?"===n[1]?L:"@"===n[1]?U:N}),h.removeAttribute(t)}else t.startsWith(i)&&(u.push({type:6,index:l}),h.removeAttribute(t));if($.test(h.tagName)){const t=h.textContent.split(i),s=t.length-1;if(s>0){h.textContent=e?e.emptyScript:"";for(let e=0;e<s;e++)h.append(t[e],c()),I.nextNode(),u.push({type:2,index:++l});h.append(t[s],c())}}}else if(8===h.nodeType)if(h.data===o)u.push({type:2,index:l});else{let t=-1;for(;-1!==(t=h.data.indexOf(i,t+1));)u.push({type:7,index:l}),t+=i.length-1}l++}}static createElement(t,e){const s=h.createElement("template");return s.innerHTML=t,s}}function P(t,e,s=t,n){if(e===C)return e;let i=void 0!==n?s._$Co?.[n]:s._$Cl;const o=l(e)?void 0:e._$litDirective$;return i?.constructor!==o&&(i?._$AO?.(!1),void 0===o?i=void 0:(i=new o(t),i._$AT(t,s,n)),void 0!==n?(s._$Co??=[])[n]=i:s._$Cl=i),void 0!==i&&(e=P(t,i._$AS(t,e.values),i,n)),e}let X=class{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:s}=this._$AD,n=(t?.creationScope??h).importNode(e,!0);I.currentNode=n;let i=I.nextNode(),o=0,r=0,c=s[0];for(;void 0!==c;){if(o===c.index){let e;2===c.type?e=new S(i,i.nextSibling,this,t):1===c.type?e=new c.ctor(i,c.name,c.strings,this,t):6===c.type&&(e=new D(i,this,t)),this._$AV.push(e),c=s[++r]}o!==c?.index&&(i=I.nextNode(),o++)}return I.currentNode=h,n}p(t){let e=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,e),e+=s.strings.length-2):s._$AI(t[e])),e++}};class S{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,s,n){this.type=2,this._$AH=w,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=s,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=P(this,t,e),l(t)?t===w||null==t||""===t?(this._$AH!==w&&this._$AR(),this._$AH=w):t!==this._$AH&&t!==C&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):d(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==w&&l(this._$AH)?this._$AA.nextSibling.data=t:this.T(h.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:s}=t,n="number"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=M.createElement(E(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===n)this._$AH.p(e);else{const t=new X(n,this),s=t.u(this.options);t.p(e),this.T(s),this._$AH=t}}_$AC(t){let e=T.get(t.strings);return void 0===e&&T.set(t.strings,e=new M(t)),e}k(t){a(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let s,n=0;for(const i of t)n===e.length?e.push(s=new S(this.O(c()),this.O(c()),this,this.options)):s=e[n],s._$AI(i),n++;n<e.length&&(this._$AR(s&&s._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class N{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,s,n,i){this.type=1,this._$AH=w,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=i,s.length>2||""!==s[0]||""!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=w}_$AI(t,e=this,s,n){const i=this.strings;let o=!1;if(void 0===i)t=P(this,t,e,0),o=!l(t)||t!==this._$AH&&t!==C,o&&(this._$AH=t);else{const n=t;let r,h;for(t=i[0],r=0;r<i.length-1;r++)h=P(this,n[s+r],e,r),h===C&&(h=this._$AH[r]),o||=!l(h)||h!==this._$AH[r],h===w?t=w:t!==w&&(t+=(h??"")+i[r+1]),this._$AH[r]=h}o&&!n&&this.j(t)}j(t){t===w?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class H extends N{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===w?void 0:t}}class L extends N{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==w)}}class U extends N{constructor(t,e,s,n,i){super(t,e,s,n,i),this.type=5}_$AI(t,e=this){if((t=P(this,t,e,0)??w)===C)return;const s=this._$AH,n=t===w&&s!==w||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,i=t!==w&&(s===w||n);n&&this.element.removeEventListener(this.name,this,s),i&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class D{constructor(t,e,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){P(this,t)}}const B={M:n,P:i,A:o,C:1,L:Y,R:X,D:d,V:P,I:S,H:N,N:L,U:U,B:H,F:D},R=t.litHtmlPolyfillSupport;R?.(M,S),(t.litHtmlVersions??=[]).push("3.2.1");const k=(t,e,s)=>{const n=s?.renderBefore??e;let i=n._$litPart$;if(void 0===i){const t=s?.renderBefore??null;n._$litPart$=i=new S(e.insertBefore(c(),t),t,void 0,s??{})}return i._$AI(t),i};var O=Object.freeze({__proto__:null,_$LH:B,html:_,mathml:x,noChange:C,nothing:w,render:k,svg:b});
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const j={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},W=t=>(...e)=>({_$litDirective$:t,values:e});let V=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,s){this._$Ct=t,this._$AM=e,this._$Ci=s}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:z}=B,F=(t,e)=>void 0!==t?._$litType$,Z=t=>void 0===t.strings,K=()=>document.createComment(""),q=(t,e,s)=>{const n=t._$AA.parentNode,i=void 0===e?t._$AB:e._$AA;if(void 0===s){const e=n.insertBefore(K(),i),o=n.insertBefore(K(),i);s=new z(e,o,t,t.options)}else{const e=s._$AB.nextSibling,o=s._$AM,r=o!==t;if(r){let e;s._$AQ?.(t),s._$AM=t,void 0!==s._$AP&&(e=t._$AU)!==o._$AU&&s._$AP(e)}if(e!==i||r){let t=s._$AA;for(;t!==e;){const e=t.nextSibling;n.insertBefore(t,i),t=e}}}return s},G=(t,e,s=t)=>(t._$AI(e,s),t),J={},Q=(t,e=J)=>t._$AH=e,tt=t=>t._$AH,et=t=>{t._$AP?.(!1,!0);let e=t._$AA;const s=t._$AB.nextSibling;for(;e!==s;){const t=e.nextSibling;e.remove(),e=t}},st=t=>{t._$AR()},nt=(t,e)=>{const s=t._$AN;if(void 0===s)return!1;for(const t of s)t._$AO?.(e,!1),nt(t,e);return!0},it=t=>{let e,s;do{if(void 0===(e=t._$AM))break;s=e._$AN,s.delete(t),t=e}while(0===s?.size)},ot=t=>{for(let e;e=t._$AM;t=e){let s=e._$AN;if(void 0===s)e._$AN=s=new Set;else if(s.has(t))break;s.add(t),ct(e)}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function rt(t){void 0!==this._$AN?(it(this),this._$AM=t,ot(this)):this._$AM=t}function ht(t,e=!1,s=0){const n=this._$AH,i=this._$AN;if(void 0!==i&&0!==i.size)if(e)if(Array.isArray(n))for(let t=s;t<n.length;t++)nt(n[t],!1),it(n[t]);else null!=n&&(nt(n,!1),it(n));else nt(this,t)}const ct=t=>{t.type==j.CHILD&&(t._$AP??=ht,t._$AQ??=rt)};class lt extends V{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,e,s){super._$AT(t,e,s),ot(this),this.isConnected=t._$AU}_$AO(t,e=!0){t!==this.isConnected&&(this.isConnected=t,t?this.reconnected?.():this.disconnected?.()),e&&(nt(this,t),it(this))}setValue(t){if(Z(this._$Ct))this._$Ct._$AI(t,this);else{const e=[...this._$Ct._$AH];e[this._$Ci]=t,this._$Ct._$AI(e,this,0)}}disconnected(){}reconnected(){}}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class at{constructor(t){this.Y=t}disconnect(){this.Y=void 0}reconnect(t){this.Y=t}deref(){return this.Y}}let dt=class{constructor(){this.Z=void 0,this.q=void 0}get(){return this.Z}pause(){this.Z??=new Promise((t=>this.q=t))}resume(){this.q?.(),this.Z=this.q=void 0}},ut=class extends lt{constructor(){super(...arguments),this._$CK=new at(this),this._$CX=new dt}render(t,e){return C}update(t,[e,s]){if(this.isConnected||this.disconnected(),e===this._$CJ)return C;this._$CJ=e;let n=0;const{_$CK:i,_$CX:o}=this;return(async(t,e)=>{for await(const s of t)if(!1===await e(s))return})(e,(async t=>{for(;o.get();)await o.get();const r=i.deref();if(void 0!==r){if(r._$CJ!==e)return!1;void 0!==s&&(t=s(t,n)),r.commitValue(t,n),n++}return!0})),C}commitValue(t,e){this.setValue(t)}disconnected(){this._$CK.disconnect(),this._$CX.pause()}reconnected(){this._$CK.reconnect(this),this._$CX.resume()}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pt=W(ut),ft=W(class extends ut{constructor(t){if(super(t),t.type!==j.CHILD)throw Error("asyncAppend can only be used in child expressions")}update(t,e){return this._$Ctt=t,super.update(t,e)}commitValue(t,e){0===e&&st(this._$Ctt);const s=q(this._$Ctt);G(s,t)}}),mt=t=>(t=>null!=t?._$litType$?.h)(t)?t._$litType$.h:t.strings,yt=W(class extends V{constructor(t){super(t),this.et=new WeakMap}render(t){return[t]}update(t,[e]){const s=F(this.it)?mt(this.it):null,n=F(e)?mt(e):null;if(null!==s&&(null===n||s!==n)){const e=tt(t).pop();let n=this.et.get(s);if(void 0===n){const t=document.createDocumentFragment();n=k(w,t),n.setConnected(!1),this.et.set(s,n)}Q(n,[e]),q(n,void 0,e)}if(null!==n){if(null===s||s!==n){const e=this.et.get(n);if(void 0!==e){const s=tt(e).pop();st(t),q(t,void 0,s),Q(t,[s])}}this.it=e}else this.it=void 0;return this.render(e)}}),vt={},gt=W(class extends V{constructor(){super(...arguments),this.ot=vt}render(t,e){return e()}update(t,[e,s]){if(Array.isArray(e)){if(Array.isArray(this.ot)&&this.ot.length===e.length&&e.every(((t,e)=>t===this.ot[e])))return C}else if(this.ot===e)return C;return this.ot=Array.isArray(e)?Array.from(e):e,this.render(e,s)}}),$t=t=>t??w
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,At=(t,e,s)=>{const n=new Map;for(let i=e;i<=s;i++)n.set(t[i],i);return n},_t=W(class extends V{constructor(t){if(super(t),t.type!==j.CHILD)throw Error("repeat() can only be used in text expressions")}dt(t,e,s){let n;void 0===s?s=e:void 0!==e&&(n=e);const i=[],o=[];let r=0;for(const e of t)i[r]=n?n(e,r):r,o[r]=s(e,r),r++;return{values:o,keys:i}}render(t,e,s){return this.dt(t,e,s).values}update(t,[e,s,n]){const i=tt(t),{values:o,keys:r}=this.dt(e,s,n);if(!Array.isArray(i))return this.ut=r,o;const h=this.ut??=[],c=[];let l,a,d=0,u=i.length-1,p=0,f=o.length-1;for(;d<=u&&p<=f;)if(null===i[d])d++;else if(null===i[u])u--;else if(h[d]===r[p])c[p]=G(i[d],o[p]),d++,p++;else if(h[u]===r[f])c[f]=G(i[u],o[f]),u--,f--;else if(h[d]===r[f])c[f]=G(i[d],o[f]),q(t,c[f+1],i[d]),d++,f--;else if(h[u]===r[p])c[p]=G(i[u],o[p]),q(t,i[d],i[u]),u--,p++;else if(void 0===l&&(l=At(r,p,f),a=At(h,d,u)),l.has(h[d]))if(l.has(h[u])){const e=a.get(r[p]),s=void 0!==e?i[e]:null;if(null===s){const e=q(t,i[d]);G(e,o[p]),c[p]=e}else c[p]=G(s,o[p]),q(t,i[d],s),i[e]=null;p++}else et(i[u]),u--;else et(i[d]),d++;for(;p<=f;){const e=q(t,c[f+1]);G(e,o[p]),c[p++]=e}for(;d<=u;){const t=i[d++];null!==t&&et(t)}return this.ut=r,Q(t,c),C}});
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
let bt=class extends V{constructor(t){if(super(t),this.it=w,t.type!==j.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===w||null==t)return this._t=void 0,this.it=t;if(t===C)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;const e=[t];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}};bt.directiveName="unsafeHTML",bt.resultType=1;const xt=W(bt),Ct=t=>!(t=>null===t||"object"!=typeof t&&"function"!=typeof t)(t)&&"function"==typeof t.then,wt=1073741823;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class Tt extends lt{constructor(){super(...arguments),this._$Cwt=wt,this._$Cbt=[],this._$CK=new at(this),this._$CX=new dt}render(...t){return t.find((t=>!Ct(t)))??C}update(t,e){const s=this._$Cbt;let n=s.length;this._$Cbt=e;const i=this._$CK,o=this._$CX;this.isConnected||this.disconnected();for(let t=0;t<e.length&&!(t>this._$Cwt);t++){const r=e[t];if(!Ct(r))return this._$Cwt=t,r;t<n&&r===s[t]||(this._$Cwt=wt,n=0,Promise.resolve(r).then((async t=>{for(;o.get();)await o.get();const e=i.deref();if(void 0!==e){const s=e._$Cbt.indexOf(r);s>-1&&s<e._$Cwt&&(e._$Cwt=s,e.setValue(t))}})))}return C}disconnected(){this._$CK.disconnect(),this._$CX.pause()}reconnected(){this._$CK.reconnect(this),this._$CX.resume()}}const It=W(Tt),Et=W(class extends V{constructor(t){if(super(t),t.type!==j.PROPERTY&&t.type!==j.ATTRIBUTE&&t.type!==j.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!Z(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===C||e===w)return e;const s=t.element,n=t.name;if(t.type===j.PROPERTY){if(e===s[n])return C}else if(t.type===j.BOOLEAN_ATTRIBUTE){if(!!e===s.hasAttribute(n))return C}else if(t.type===j.ATTRIBUTE&&s.getAttribute(n)===e+"")return C;return Q(t),e}}),Yt="important",Mt=" !"+Yt,Pt=W(class extends V{constructor(t){if(super(t),t.type!==j.ATTRIBUTE||"style"!==t.name||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,s)=>{const n=t[s];return null==n?e:e+`${s=s.includes("-")?s:s.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${n};`}),"")}update(t,[e]){const{style:s}=t.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(e)),this.render(e);for(const t of this.ft)null==e[t]&&(this.ft.delete(t),t.includes("-")?s.removeProperty(t):s[t]=null);for(const t in e){const n=e[t];if(null!=n){this.ft.add(t);const e="string"==typeof n&&n.endsWith(Mt);t.includes("-")||e?s.setProperty(t,e?n.slice(0,-11):n,e?Yt:""):s[t]=n}}return C}}),Xt=W(class extends V{constructor(t){if(super(t),t.type!==j.ATTRIBUTE||"class"!==t.name||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){if(void 0===this.st){this.st=new Set,void 0!==t.strings&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((t=>""!==t))));for(const t in e)e[t]&&!this.nt?.has(t)&&this.st.add(t);return this.render(e)}const s=t.element.classList;for(const t of this.st)t in e||(s.remove(t),this.st.delete(t));for(const t in e){const n=!!e[t];n===this.st.has(t)||this.nt?.has(t)||(n?(s.add(t),this.st.add(t)):(s.remove(t),this.st.delete(t)))}return C}});
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
function St(t,e,s){return t?e(t):s?.(t)}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Nt=(t,e,s)=>{for(const s of e)if(s[0]===t)return(0,s[1])();return s?.()};
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*Ht(t,e){if(void 0!==t){let s=0;for(const n of t)yield e(n,s++)}}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*Lt(t,e){const s="function"==typeof e;if(void 0!==t){let n=-1;for(const i of t)n>-1&&(yield s?e(n):e),n++,yield i}}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*Ut(t,e,s=1){const n=void 0===e?0:t;e??=t;for(let t=n;s>0?t<e:e<t;t+=s)yield t}
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Dt=W(class extends V{constructor(t){if(super(t),t.type!==j.CHILD)throw Error("templateContent can only be used in child bindings")}render(t){return this.vt===t?C:(this.vt=t,document.importNode(t.content,!0))}});
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class Bt extends bt{}Bt.directiveName="unsafeSVG",Bt.resultType=2;const Rt=W(Bt),kt=()=>new Ot;
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class Ot{}const jt=new WeakMap,Wt=W(class extends lt{render(t){return w}update(t,[e]){const s=e!==this.Y;return s&&void 0!==this.Y&&this.rt(void 0),(s||this.lt!==this.ct)&&(this.Y=e,this.ht=t.options?.host,this.rt(this.ct=t.element)),w}rt(t){if(this.isConnected||(t=void 0),"function"==typeof this.Y){const e=this.ht??globalThis;let s=jt.get(e);void 0===s&&(s=new WeakMap,jt.set(e,s)),void 0!==s.get(this.Y)&&this.Y.call(this.ht,void 0),s.set(this.Y,t),void 0!==t&&this.Y.call(this.ht,t)}else this.Y.value=t}get lt(){return"function"==typeof this.Y?jt.get(this.ht??globalThis)?.get(this.Y):this.Y?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}}),Vt=new WeakMap;class zt extends V{update(t,e){return e[0].execute(t),C}render(t){return t.toString()}}class Ft{constructor(t,e={schedule:!1}){this.schedule=!1,this.style=t,this._directive=W(zt),this.execute=this.execute.bind(this),this.schedule=e.schedule}directive(){return this._directive(this)}setStyle(t){for(const t in this.style)delete this.style[t];for(const e in t)this.style[e]=t[e]}toString(){return Object.keys(this.style).reduce(((t,e)=>{const s=this.style[e];return null==s?t:t+`${e=e.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${s};`}),"")}_getInternalStyle(){return this.element?Vt.get(this.element):null}updateStyle(t,e,s){const n=s.previousStyle;for(const t of e)t&&!this.style[t]&&(s.toRemove.includes(t)||s.toRemove.push(t));for(const t in n)t&&t in this.style&&!this.style[t]&&e.includes(t)&&(s.toRemove.includes(t)||s.toRemove.push(t));for(const t in this.style){if(!t)continue;if(!(t in this.style))continue;const i=this.style[t];if(!i)continue;const o=n[t];void 0!==o&&o===i&&e.includes(t)||s.toUpdate.push(t)}if(s.toRemove.length||s.toUpdate.length){for(const e of s.toRemove)t.removeProperty(e),t[e]&&delete t[e],s.elementStyles=s.elementStyles.filter((t=>t!==e));for(const e of s.toUpdate){const n=this.style[e];n&&(e.includes("-")?t.setProperty(e,n):t[e]=n,s.elementStyles.includes(e)||s.elementStyles.push(e))}s.previousStyle=Object.assign({},this.style)}}execute(t){const e=t.element;let s;this.element=e,Vt.has(e)?s=Vt.get(e):(s={toUpdate:[],toRemove:[],previousStyle:{},elementStyles:[],styleTaken:!1},Vt.set(e,s)),s.toRemove.length=0,s.toUpdate.length=0;const n=e.style;let i;if(s.styleTaken)i=s.elementStyles;else{s.elementStyles=i=[];for(let t=s.length;t--;)i.push(n[t]);s.styleTaken=!0}this.schedule?requestAnimationFrame((()=>{this.updateStyle(n,i,s)})):this.updateStyle(n,i,s),Vt.set(e,s)}}const Zt=new WeakMap;const Kt=W(class extends V{render(t){return w}update(t,e){if("boolean"!=typeof e[0])throw new Error("[vido] Detach directive argument should be a boolean.");let s=e[0];const n=t.element;if(s)Zt.has(t)||Zt.set(t,{element:n,nextSibling:n.nextSibling,previousSibling:n.previousSibling,parent:n.parentNode}),n.remove();else{const e=Zt.get(t);e&&(e.nextSibling&&e.nextSibling.parentNode?e.nextSibling.parentNode.insertBefore(e.element,e.nextSibling):e.previousSibling&&e.previousSibling.parentNode?e.previousSibling.parentNode.appendChild(e.element):e.parent&&e.parent.appendChild(e.element),Zt.delete(t))}return this.render(s)}});class qt{constructor(){this.isAction=!0}}qt.prototype.isAction=!0;const Gt={element:document.createTextNode(""),axis:"xy",threshold:10,onDown(){},onMove(){},onUp(){},onWheel(){}},Jt="undefined"!=typeof PointerEvent;let Qt=0;class te extends qt{constructor(t,e){super(),this.moving="",this.initialX=0,this.initialY=0,this.lastY=0,this.lastX=0,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onWheel=this.onWheel.bind(this),this.element=t,this.id=++Qt,this.options=Object.assign(Object.assign({},Gt),e.pointerOptions),Jt?(t.addEventListener("pointerdown",this.onPointerDown),document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.onPointerUp)):(t.addEventListener("touchstart",this.onPointerDown),document.addEventListener("touchmove",this.onPointerMove,{passive:!1}),document.addEventListener("touchend",this.onPointerUp),document.addEventListener("touchcancel",this.onPointerUp),t.addEventListener("mousedown",this.onPointerDown),document.addEventListener("mousemove",this.onPointerMove,{passive:!1}),document.addEventListener("mouseup",this.onPointerUp))}normalizeMouseWheelEvent(t){let e=t.deltaX||0,s=t.deltaY||0,n=t.deltaZ||0;const i=t.deltaMode,o=parseInt(getComputedStyle(t.target).getPropertyValue("line-height"));let r=1;switch(i){case 1:r=o;break;case 2:r=window.height}return e*=r,s*=r,n*=r,{x:e,y:s,z:n,event:t}}onWheel(t){const e=this.normalizeMouseWheelEvent(t);this.options.onWheel(e)}normalizePointerEvent(t){let e={x:0,y:0,pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0,event:t};switch(t.type){case"wheel":const s=this.normalizeMouseWheelEvent(t);e.x=s.x,e.y=s.y,e.pageX=e.x,e.pageY=e.y,e.screenX=e.x,e.screenY=e.y,e.clientX=e.x,e.clientY=e.y;break;case"touchstart":case"touchmove":case"touchend":case"touchcancel":e.x=t.changedTouches[0].screenX,e.y=t.changedTouches[0].screenY,e.pageX=t.changedTouches[0].pageX,e.pageY=t.changedTouches[0].pageY,e.screenX=t.changedTouches[0].screenX,e.screenY=t.changedTouches[0].screenY,e.clientX=t.changedTouches[0].clientX,e.clientY=t.changedTouches[0].clientY;break;default:e.x=t.x,e.y=t.y,e.pageX=t.pageX,e.pageY=t.pageY,e.screenX=t.screenX,e.screenY=t.screenY,e.clientX=t.clientX,e.clientY=t.clientY}return e}onPointerDown(t){if("mousedown"===t.type&&0!==t.button)return;this.moving="xy";const e=this.normalizePointerEvent(t);this.lastX=e.x,this.lastY=e.y,this.initialX=e.x,this.initialY=e.y,this.options.onDown(e)}handleX(t){let e=t.x-this.lastX;return this.lastY=t.y,this.lastX=t.x,e}handleY(t){let e=t.y-this.lastY;return this.lastY=t.y,this.lastX=t.x,e}onPointerMove(t){if(""===this.moving||"mousemove"===t.type&&0!==t.button)return;const e=this.normalizePointerEvent(t);if("x|y"===this.options.axis){let s=0,n=0;("x"===this.moving||"xy"===this.moving&&Math.abs(e.x-this.initialX)>this.options.threshold)&&(this.moving="x",s=this.handleX(e)),("y"===this.moving||"xy"===this.moving&&Math.abs(e.y-this.initialY)>this.options.threshold)&&(this.moving="y",n=this.handleY(e)),this.options.onMove({movementX:s,movementY:n,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t})}else if("xy"===this.options.axis){let s=0,n=0;Math.abs(e.x-this.initialX)>this.options.threshold&&(s=this.handleX(e)),Math.abs(e.y-this.initialY)>this.options.threshold&&(n=this.handleY(e)),this.options.onMove({movementX:s,movementY:n,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t})}else if("x"===this.options.axis)("x"===this.moving||"xy"===this.moving&&Math.abs(e.x-this.initialX)>this.options.threshold)&&(this.moving="x",this.options.onMove({movementX:this.handleX(e),movementY:0,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t}));else if("y"===this.options.axis){let s=0;("y"===this.moving||"xy"===this.moving&&Math.abs(e.y-this.initialY)>this.options.threshold)&&(this.moving="y",s=this.handleY(e)),this.options.onMove({movementX:0,movementY:s,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t})}}onPointerUp(t){this.moving="";const e=this.normalizePointerEvent(t);this.options.onUp({movementX:0,movementY:0,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t}),this.lastY=0,this.lastX=0}destroy(t){Jt?(t.removeEventListener("pointerdown",this.onPointerDown),document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp)):(t.removeEventListener("mousedown",this.onPointerDown),document.removeEventListener("mousemove",this.onPointerMove),document.removeEventListener("mouseup",this.onPointerUp),t.removeEventListener("touchstart",this.onPointerDown),document.removeEventListener("touchmove",this.onPointerMove),document.removeEventListener("touchend",this.onPointerUp),document.removeEventListener("touchcancel",this.onPointerUp))}}function ee(t){let e=0;return function(s){e||(e=requestAnimationFrame((function(){e=0,t.apply(void 0,[s])})))}}function se(t){return null==t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t||"symbol"==typeof t}function ne(t){return!se(t)&&(t&&t.constructor?"Object"===t.constructor.name:"object"==typeof t&&null!==t)}function ie(t){return!se(t)&&(Array.isArray(t)||ne(t))}function oe(t,...e){const s=e.shift();if(ne(s)){ne(t)||(t=Object.create(null));for(const e in s){const n=s[e];ie(n)?t[e]=oe(t[e],n):t[e]=n}}else if(Array.isArray(s)){const e=s.length;Array.isArray(t)?t.length=e:t=new Array(e);let n=0;for(;n<e;n++){const e=s[n];ie(e)?t[n]=oe(t[n],e):t[n]=e}void 0!==s.raw&&(t.raw=s.raw.slice())}else t=s;return e.length?oe(t,...e):t}function re(t){if(void 0!==t.actions){const e=t.actions.map((t=>{const e=Object.assign({},t),s=Object.assign({},e.props);return delete s.state,delete s.api,delete e.element,e.props=s,e}));t.actions=e}return oe({},t)}var he={mergeDeep:oe,clone:re,schedule:ee};class ce{constructor(t,e){this.slotInstances={},this.destroyed=!1,this.vido=t,this.props=e,this.destroy=this.destroy.bind(this),this.change=this.change.bind(this),this.html=this.html.bind(this),this.getInstances=this.getInstances.bind(this),this.setComponents=this.setComponents.bind(this),this.vido.onDestroy((()=>{this.destroy()}))}setComponents(t){if(t&&!this.destroyed){for(const e in t){const s=t[e];void 0===this.slotInstances[e]&&(this.slotInstances[e]=[]);for(const t of this.slotInstances[e])t.destroy();this.slotInstances[e].length=0;for(const t of s)this.slotInstances[e].push(this.vido.createComponent(t,this.props))}this.vido.update()}}destroy(){if(!this.destroyed){for(const t in this.slotInstances){for(const e of this.slotInstances[t])e.destroy();this.slotInstances[t].length=0}this.destroyed=!0}}change(t,e=void 0){if(!this.destroyed){this.props=t;for(const s in this.slotInstances){const n=this.slotInstances[s];for(const s of n)s.change(t,e)}}}getInstances(t){return this.destroyed?[]:void 0===t?this.slotInstances:this.slotInstances[t]}html(t,e){if(this.destroyed)return;if(!this.slotInstances[t]||0===this.slotInstances[t].length)return e;let s=e;for(const e of this.slotInstances[t])s=e.html(s);return s}getProps(){return this.props}isDestroyed(){return this.destroyed}}class le extends V{update(t,e){if("function"!=typeof e[0])throw new Error("[vido] GetElementDirective argument should be a function.");(0,e[0])(t.element)}render(){return w}}function ae(t,e){let s=0;const n=new Map;let i,o,r=new Map,h=0;const c=[],l=Promise.resolve(),a={},d=function(t){return class extends V{update(e,s){const n=e.element,i=s[0],o=s[1],r=s[2];for(const e of o)if(void 0!==e){let s;if(t.has(i))for(const o of t.get(i))if(o.componentAction.create===e&&o.element===n){s=o;break}if(s)s.props=r;else{void 0!==n.vido&&delete n.vido;const s={instance:i,componentAction:{create:e,update(){},destroy(){}},element:n,props:r};let o=[];t.has(i)&&(o=t.get(i)),o.push(s),t.set(i,o)}}}render(t,e,s){return w}}}(r);class u{constructor(t){this.instance=t}create(t,e){const s=W(d);return()=>s(this.instance,t,e)}}const p=function(t,e,s){return class{constructor(t,e,s={}){this.destroyed=!1,this.instance=t,this.name=e.name,this.vidoInstance=e,this.props=s,this.destroy=this.destroy.bind(this),this.update=this.update.bind(this),this.change=this.change.bind(this),this.html=this.html.bind(this)}destroy(){this.destroyed||(this.vidoInstance.debug&&(console.groupCollapsed(`destroying component ${this.instance}`),console.log(s({components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),this.vidoInstance.destroyComponent(this.instance,this.vidoInstance),this.destroyed=!0)}update(n=void 0){return this.vidoInstance.debug&&(console.groupCollapsed(`updating component ${this.instance}`),console.log(s({components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),this.vidoInstance.updateTemplate(n)}change(n,i={}){this.vidoInstance.debug&&(console.groupCollapsed(`changing component ${this.instance}`),console.log(s({props:this.props,newProps:n,components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd());const o=t.get(this.instance);o&&o.change(n,i)}html(e={}){const s=t.get(this.instance);if(s&&!s.destroyed)return s.update(e,this.vidoInstance)}_getComponents(){return t}_getActions(){return e}}}(n,r,re),f=function(t,e,s){return class{constructor(t,e,s){this.destroyed=!1,this.instance=t,this.vidoInstance=e,this.renderFunction=s,this.destroy=this.destroy.bind(this),this.update=this.update.bind(this),this.change=this.change.bind(this)}destroy(){if(!this.destroyed){this.vidoInstance.debug&&(console.groupCollapsed(`component destroy method fired ${this.instance}`),console.log(s({props:this.vidoInstance.props,components:t.keys(),destroyable:this.vidoInstance.destroyable,actionsByInstance:e})),console.trace(),console.groupEnd()),this.content&&"function"==typeof this.content.destroy&&this.content.destroy();for(const t of this.vidoInstance.destroyable)t();this.vidoInstance.onChangeFunctions.length=0,this.vidoInstance.destroyable.length=0,this.vidoInstance.destroyed=!0,this.destroyed=!0,this.vidoInstance.update()}}update(n={}){return this.vidoInstance.debug&&(console.groupCollapsed(`component update method fired ${this.instance}`),console.log(s({components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),this.renderFunction(n)}change(n,i={leave:!1}){const o=n;this.vidoInstance.debug&&(console.groupCollapsed(`component change method fired ${this.instance}`),console.log(s({props:o,components:t.keys(),onChangeFunctions:this.vidoInstance.onChangeFunctions,changedProps:n,actionsByInstance:e})),console.trace(),console.groupEnd());for(const t of this.vidoInstance.onChangeFunctions)t(n,i)}}}(n,r,re);class m{constructor(s="",i=""){this.instance="",this.name="",this.destroyable=[],this.destroyed=!1,this.onChangeFunctions=[],this.debug=!1,this.state=t,this.api=e,this.lastProps={},this.html=_,this.svg=b,this.lithtml=O,this.directive=W,this.asyncAppend=ft,this.asyncReplace=pt,this.cache=yt,this.classMap=Xt,this.styleMap=Pt,this.StyleMap=Ft,this.guard=gt,this.live=Et,this.ifDefined=$t,this.repeat=_t,this.unsafeHTML=xt,this.until=It,this.when=St,this.choose=Nt,this.map=Ht,this.join=Lt,this.range=Ut,this.templateContent=Dt,this.unsafeSVG=Rt,this.ref=Wt,this.schedule=ee,this.getElement=W(le),this.actionsByInstance=()=>{},this.detach=Kt,this.PointerAction=te,this.Action=qt,this.Slots=ce,this._components=n,this._actions=r,this.instance=s,this.reuseComponents=this.reuseComponents.bind(this),this.onDestroy=this.onDestroy.bind(this),this.onChange=this.onChange.bind(this),this.update=this.update.bind(this),this.destroyComponent=this.destroyComponent.bind(this);for(const t in a)this[t]=a[t].bind(this);this.name=i,this.Actions=new u(s)}static addMethod(t,e){a[t]=e}onDestroy(t){this.destroyable.push(t)}onChange(t){this.onChangeFunctions.push(t)}update(t){return this.updateTemplate(t)}reuseComponents(t,e,s,n,i=!0,o=!1){const r=[],h=t.length,c=e.length;let l=!1;!i||void 0!==e&&0!==e.length||(l=!0);let a=0;if(h<c){let i=c-h;for(;i;){const o=e[c-i],h=this.createComponent(n,s(o));t.push(h),r.push(h),i--}}else if(h>c){let e=h-c;if(i)l=!0,a=h-e;else{for(;e;){const s=h-e;r.push(t[s]),t[s].destroy(),e--}t.length=c}}let d=0;o&&console.log("modified components",r),o&&console.log("current components",t),o&&console.log("data array",e);for(const n of t){const t=e[d];o&&console.log(`reuse components data at '${d}'`,t),n&&!r.includes(n)&&(o&&console.log("getProps fn result",s(t)),n.change(s(t),{leave:l&&d>=a})),d++}}createComponent(t,e={}){const i=t.name+":"+s++;let o;o=new m(i,t.name);const h=new p(i,o,e),c=new f(i,o,t(o,e));return n.set(i,c),n.get(i).change(e),o.debug&&(console.groupCollapsed(`component created ${i}`),console.log(re({props:e,components:n.keys(),actionsByInstance:r})),console.trace(),console.groupEnd()),h}destroyComponent(t,e){if(e.debug&&(console.groupCollapsed(`destroying component ${t}...`),console.log(re({components:n.keys(),actionsByInstance:r})),console.trace(),console.groupEnd()),r.has(t))for(const e of r.get(t))"function"==typeof e.componentAction.destroy&&e.componentAction.destroy(e.element,e.props);r.delete(t);const s=n.get(t);s?(s.destroy(),n.delete(t),e.debug&&(console.groupCollapsed(`component destroyed ${t}`),console.log(re({components:n.keys(),actionsByInstance:r})),console.trace(),console.groupEnd())):console.warn(`No component to destroy! [${t}]`)}executeActions(){for(const t of r.values()){for(const e of t)if(void 0===e.element.vido){const t=n.get(e.instance);e.isActive=function(){return t&&!1===t.destroyed};const s=e.componentAction,i=s.create;if(void 0!==i){let t;t=i.prototype&&(i.prototype.isAction||i.prototype.update||i.prototype.destroy)||i.isAction?new i(e.element,e.props):i(e.element,e.props),void 0!==t&&("function"==typeof t?s.destroy=t:("function"==typeof t.update&&(s.update=t.update.bind(t)),"function"==typeof t.destroy&&(s.destroy=t.destroy.bind(t))))}}else e.element.vido=e.props,"function"==typeof e.componentAction.update&&e.isActive()&&e.componentAction.update(e.element,e.props);for(const e of t)e.element.vido=e.props}}updateTemplate(t=void 0){return t&&c.push(t),new Promise((t=>{const e=++h,s=this;l.then((function(){if(e===h){h=0,s.render();for(const t of c)t();c.length=0,t(null)}}))}))}createApp(t){o=t.element;const e=this.createComponent(t.component,t.props);return i=e.instance,this.render(),e}render(){const t=n.get(i);t?(k(t.update(),o),this.executeActions()):o&&o.remove()}}return new m}ae.lithtml=O,ae.Action=qt,ae.Directive=V,ae.StyleMap=Ft,ae.PointerAction=te,ae.Slots=ce,ae.directives={schedule:ee,detach:Kt,styleMap:Pt,classMap:Xt,asyncAppend:ft,asyncReplace:pt,cache:yt,guard:gt,live:Et,ifDefined:$t,repeat:_t,unsafeHTML:xt,until:It,when:St,choose:Nt,map:Ht,join:Lt,range:Ut,templateContent:Dt,unsafeSVG:Rt,ref:Wt};const de=O;export{qt as Action,ut as AsyncReplaceDirective,V as Directive,j as PartType,te as PointerAction,ce as Slots,Ft as StyleMap,bt as UnsafeHTMLDirective,Tt as UntilDirective,B as _$LH,ft as asyncAppend,pt as asyncReplace,yt as cache,Nt as choose,Xt as classMap,kt as createRef,ae as default,Kt as detach,W as directive,gt as guard,he as helpers,_ as html,$t as ifDefined,Lt as join,de as lit,O as lithtml,Ht as map,x as mathml,C as noChange,w as nothing,Ut as range,Wt as ref,k as render,_t as repeat,ee as schedule,Pt as styleMap,b as svg,Dt as templateContent,xt as unsafeHTML,Rt as unsafeSVG,It as until,St as when};
//# sourceMappingURL=vido.min.js.map
